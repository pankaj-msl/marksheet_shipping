import{k as y,Q as b,l as Q,T as Y,h as T,p as q,q as g,o as p,f as u,a as o,b as t,w as i,d as m,t as d,F as w,x as S,g as D,e as G,u as c,y as J,i as f,O as k,D as K,z as W,A as X,B as Z,C as tt}from"./app-D1mwo86F.js";import et from"./Header-DSwLys8E.js";import{_ as st}from"./_plugin-vue_export-helper-DlAUqK2U.js";const n=v=>(Z("data-v-b1cf8c6c"),v=v(),tt(),v),ot={id:"main",class:"main"},lt=W('<div class="pagetitle" data-v-b1cf8c6c><h1 data-v-b1cf8c6c>Document Shipment Portal</h1><nav data-v-b1cf8c6c><ol class="breadcrumb" data-v-b1cf8c6c><li class="breadcrumb-item" data-v-b1cf8c6c><a href="#" data-v-b1cf8c6c>Home</a></li><li class="breadcrumb-item active" data-v-b1cf8c6c>Document Shipment Portal</li></ol></nav></div>',1),dt={class:"section"},nt=n(()=>t("strong",null,"Email:",-1)),at=n(()=>t("strong",null,"City:",-1)),it=n(()=>t("strong",null,"Address:",-1)),ct=n(()=>t("strong",null,"Pincode:",-1)),rt=n(()=>t("strong",null,"Exam Cycle:",-1)),pt=n(()=>t("strong",null,"Passing Year:",-1)),ut=n(()=>t("strong",null,"Exam Status:",-1)),mt=n(()=>t("strong",null,"Created By:",-1)),_t=n(()=>t("strong",{style:{color:"brown"}},"Documents Pending",-1)),gt={key:0,style:{"list-style-type":"none"}},ht=n(()=>t("strong",{style:{color:"darkorange"}},"Documents Shipped",-1)),yt={key:0,style:{"list-style-type":"none"}},ft=n(()=>t("strong",{style:{color:"darkgreen"}},"Documents Delivered",-1)),vt={key:0,style:{"list-style-type":"none"}},xt={class:"mt-8 flex flex-col"},bt={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},wt={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},kt={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg relative"},St={class:"min-w-full divide-y divide-gray-300"},Dt=n(()=>t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"py-3.5 pl-1 pr-1 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Documents "),t("th",{scope:"col",class:"py-3.5 pl-1 pr-1 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Tracking ID "),t("th",{scope:"col",class:"py-3.5 pl-1 pr-1 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Shipping Agent "),t("th",{scope:"col",class:"py-3.5 pl-1 pr-1 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Shipping Address "),t("th",{scope:"col",class:"py-3.5 pl-1 pr-1 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Dispatched At "),t("th",{scope:"col",class:"py-3.5 pl-1 pr-1 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Amount "),t("th",{scope:"col",class:"py-3.5 pl-1 pr-1 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Delivery Status "),t("th",{scope:"col",class:"py-3.5 pl-1 pr-1 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Delivered At "),t("th",{scope:"col",class:"py-3.5 pl-1 pr-1 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Action ")])],-1)),At={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},Vt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},Ct={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},Ut={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},Nt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},Tt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},It={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},Ot={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},jt={key:0,class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},qt=["onClick"],zt={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},Bt={class:"lg:grid lg:grid-cols-12 lg:gap-x-5"},Et={class:"space-y-6 sm:px-6 lg:px-0 lg:col-span-12"},Pt={class:"shadow sm:rounded-md sm:overflow-hidden"},Mt={class:"bg-white py-6 px-4 space-y-6 sm:p-6"},Ft={class:"text-lg leading-6 font-medium text-gray-900"},Rt={class:"mt-1 text-sm text-gray-500"},$t={class:"grid grid-cols-6 gap-6"},Ht={class:"col-span-6 sm:col-span-3"},Lt=n(()=>t("label",{for:"shipping_agent",class:"block text-sm font-medium text-gray-700"},"Shipping Agent",-1)),Qt={class:"col-span-6 sm:col-span-3"},Yt=n(()=>t("label",{for:"tracking_id",class:"block text-sm font-medium text-gray-700"},"Tracking ID",-1)),Gt={class:"col-span-6 sm:col-span-3"},Jt=n(()=>t("label",{for:"shipping_address",class:"block text-sm font-medium text-gray-700"},"Shipping Address",-1)),Kt={class:"col-span-6 sm:col-span-3"},Wt=n(()=>t("label",{for:"amount",class:"block text-sm font-medium text-gray-700"},"Amount",-1)),Xt={class:"col-span-6 sm:col-span-3"},Zt=n(()=>t("label",{for:"dispatched_at",class:"block text-sm font-medium text-gray-700"},"Dispatched At",-1)),te={class:"col-span-6 sm:col-span-3"},ee=n(()=>t("label",{for:"delivery_status",class:"block text-sm font-medium text-gray-700"},"Delivery Status",-1)),se=n(()=>t("option",{value:""},"Select Delivery Status",-1)),oe=n(()=>t("option",{value:"shipped"},"Shipped",-1)),le=n(()=>t("option",{value:"delivered"},"Delivered",-1)),de=[se,oe,le],ne={key:0,class:"col-span-6 sm:col-span-3"},ae=n(()=>t("label",{for:"delivered_at",class:"block text-sm font-medium text-gray-700"},"Delivered At",-1)),ie={class:"px-4 py-3 bg-gray-50 text-right sm:px-6"},ce=n(()=>t("button",{type:"submit",class:"bg-indigo-600 border border-transparent rounded-md shadow-sm py-2 px-4 inline-flex justify-center text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Save ",-1)),re={__name:"Shipment",props:{student:{type:Object,required:!0},shipments:{type:Object,required:!0},client:{type:Object,required:!0},admin:{type:Object,required:!0}},setup(v){const r=y(b().props.student),U=y(b().props.shipments);console.log(U);let h=y([]);const x=y(!1);let A=y([]);const I=Q();let V=y("");const s=Y({student_id:b().props.student.id,document_ids:T(()=>h.value.map(l=>l.id)),shipment_id:"",tracking_id:"",shipping_agent:"",shipping_address:"",dispatched_at:"",amount:"",delivery_status:"",delivered_at:""}),z=()=>{V.value="Create Shipment",h=y([]),A=y(b().props.student.documents.filter(l=>!l.shipment_id)),s.student_id=b().props.student.id,s.document_ids=T(()=>h.value.map(l=>l.id)),s.shipment_id="",s.tracking_id="",s.shipping_agent="",s.shipping_address="",s.dispatched_at="",s.amount="",s.delivery_status="",s.delivered_at="",console.log(s.student_id),x.value=!0};q(h.value,l=>{console.log(l)});const B=l=>{console.log("updateShipment has been called"),V.value="Update Shipment",A.value=l.documents,s.document_ids=T(()=>A.value.map(a=>a.id)),h=s.document_ids,s.shipment_id=l.id,s.tracking_id=l.tracking_id,s.shipping_agent=l.shipping_agent,s.shipping_address=l.shipping_address,s.dispatched_at=l.dispatched_at,s.amount=l.amount,s.delivery_status=l.delivery_status,s.delivered_at=l.delivered_at,x.value=!0},E=()=>{X.post("/shipments/create",s).then(l=>{console.log(l),s.value={},x.value=!1,r.value=l.data.student,U.value=l.data.shipments,b().props.student=r,I.success("Shipment created successfully!")}).catch(l=>{console.error(l),I.error("Failed to create shipment!")})};return q(s,l=>{console.log(l)}),(l,a)=>{const P=g("v-card-title"),M=g("v-card-subtitle"),O=g("v-divider"),_=g("v-col"),j=g("v-row"),C=g("v-icon"),F=g("v-card-text"),R=g("v-card"),$=g("v-sheet"),H=g("v-combobox"),L=g("v-dialog");return p(),u(w,null,[o(et,{data:{client:v.client,admin:v.admin}},null,8,["data"]),t("main",ot,[lt,t("section",dt,[o($,null,{default:i(()=>[o(R,null,{default:i(()=>[o(P,{class:"text-h6 text-center"},{default:i(()=>[m(d(r.value.student_name),1)]),_:1}),o(M,{class:"text-center"},{default:i(()=>[m("Roll No: "+d(r.value.student_roll_no),1)]),_:1}),o(O),o(F,null,{default:i(()=>[o(j,null,{default:i(()=>[o(_,{cols:"3",class:"py-1"},{default:i(()=>[nt,m(" "+d(r.value.email),1)]),_:1}),o(_,{cols:"3",class:"py-1"},{default:i(()=>[at,m(" "+d(r.value.student_city),1)]),_:1}),o(_,{cols:"3",class:"py-1"},{default:i(()=>[it,m(" "+d(r.value.student_address),1)]),_:1}),o(_,{cols:"3",class:"py-1"},{default:i(()=>[ct,m(" "+d(r.value.student_pincode),1)]),_:1}),o(_,{cols:"3",class:"py-1"},{default:i(()=>[rt,m(" "+d(r.value.exam_cycle),1)]),_:1}),o(_,{cols:"3",class:"py-1"},{default:i(()=>[pt,m(" "+d(r.value.student_passing_year),1)]),_:1}),o(_,{cols:"3",class:"py-1"},{default:i(()=>[ut,m(" "+d(r.value.student_exam_status),1)]),_:1}),o(_,{cols:"3",class:"py-1"},{default:i(()=>[mt,m(" "+d(r.value.created_by),1)]),_:1})]),_:1}),o(O),o(j,null,{default:i(()=>[o(_,{cols:"4",class:"py-1"},{default:i(()=>[_t,(p(!0),u(w,null,S(r.value.documents,e=>(p(),u("span",null,[e!=null&&e.shipment_id?D("",!0):(p(),u("li",gt,[o(C,{size:"medium",color:"red-darken-4",icon:"mdi-knob",class:"mx-1"}),m(d(e.document_name),1)]))]))),256))]),_:1}),o(_,{cols:"4",class:"py-1"},{default:i(()=>[ht,(p(!0),u(w,null,S(r.value.documents,e=>(p(),u("span",null,[e!=null&&e.shipment_id&&e.shipment.delivery_status=="shipped"?(p(),u("li",yt,[o(C,{size:"medium",color:"warning",icon:"mdi-truck",class:"mx-1"}),m(d(e.document_name),1)])):D("",!0)]))),256))]),_:1}),o(_,{cols:"4",class:"py-1"},{default:i(()=>[ft,(p(!0),u(w,null,S(r.value.documents,e=>(p(),u("span",null,[e!=null&&e.shipment_id&&e.shipment.delivery_status=="delivered"?(p(),u("li",vt,[o(C,{size:"medium",color:"green-darken-2",icon:"mdi-check-decagram",class:"mx-1"}),m(d(e.document_name),1)])):D("",!0)]))),256))]),_:1})]),_:1})]),_:1})]),_:1}),t("button",{onClick:z,class:"btn btn-primary mx-4 my-4"},"Create Shipment"),t("div",xt,[t("div",bt,[t("div",wt,[t("div",kt,[t("table",St,[Dt,(p(!0),u(w,null,S(U.value,e=>(p(),u("tbody",{key:r.value.id,class:"divide-y divide-gray-200 bg-white"},[t("tr",null,[t("td",At,[(p(!0),u(w,null,S(e.documents,N=>(p(),u("li",{style:{"list-style-type":"none"},key:N.id},[o(C,{size:"medium",color:"green-darken-2",icon:"mdi-check-circle",class:"mx-1"}),m(d(N.document_name),1)]))),128))]),t("td",Vt,d(e.tracking_id),1),t("td",Ct,d(e.shipping_agent||"N/A"),1),t("td",Ut,d(e.shipping_address||"N/A"),1),t("td",Nt,d(e.dispatched_at||"N/A"),1),t("td",Tt,d(e.amount||"N/A"),1),t("td",It,d(e.delivery_status||"N/A"),1),t("td",Ot,d(e.delivered_at||"N/A"),1),e.delivery_status!="delivered"?(p(),u("td",jt,[t("button",{onClick:N=>B(e),class:"btn btn-warning"},"Edit Shipment",8,qt)])):D("",!0)])]))),128))])])])])])]),_:1}),o(L,{modelValue:x.value,"onUpdate:modelValue":a[9]||(a[9]=e=>x.value=e)},{default:i(()=>[t("div",zt,[t("div",Bt,[t("div",Et,[t("form",{onSubmit:G(E,["prevent"])},[t("div",Pt,[t("div",Mt,[t("div",null,[t("h3",Ft,d(c(V))+" for Document ",1),t("p",Rt," Use this form to create a "+d(c(V)),1)]),o(H,{modelValue:c(h),"onUpdate:modelValue":a[0]||(a[0]=e=>J(h)?h.value=e:h=e),color:"primary",items:c(A),"item-value":"id","item-title":"document_name",label:"Select documents...",chips:"",multiple:""},null,8,["modelValue","items"]),t("div",$t,[t("div",Ht,[Lt,f(t("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>c(s).shipping_agent=e),type:"text",id:"shipping_agent",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[k,c(s).shipping_agent]])]),t("div",Qt,[Yt,f(t("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>c(s).tracking_id=e),type:"text",id:"tracking_id",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[k,c(s).tracking_id]])]),t("div",Gt,[Jt,f(t("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>c(s).shipping_address=e),type:"text",id:"shipping_address",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[k,c(s).shipping_address]])]),t("div",Kt,[Wt,f(t("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>c(s).amount=e),type:"text",id:"amount",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[k,c(s).amount]])]),t("div",Xt,[Zt,f(t("input",{"onUpdate:modelValue":a[5]||(a[5]=e=>c(s).dispatched_at=e),type:"date",id:"dispatched_at",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[k,c(s).dispatched_at]])]),t("div",te,[ee,f(t("select",{"onUpdate:modelValue":a[6]||(a[6]=e=>c(s).delivery_status=e),id:"delivery_status",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},de,512),[[K,c(s).delivery_status]])]),c(s).delivery_status=="delivered"?(p(),u("div",ne,[ae,f(t("input",{"onUpdate:modelValue":a[7]||(a[7]=e=>c(s).delivered_at=e),type:"date",id:"delivered_at",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[k,c(s).delivered_at]])])):D("",!0)])]),t("div",ie,[t("a",{href:"#",onClick:a[8]||(a[8]=e=>x.value=!1),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 mr-4"}," Cancel "),ce])])],32)])])])]),_:1},8,["modelValue"])])])],64)}}},_e=st(re,[["__scopeId","data-v-b1cf8c6c"]]);export{_e as default};
