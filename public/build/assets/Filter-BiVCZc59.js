import{k as f,l as W,p as E,A as B,q as v,o as c,f as r,a as t,w as o,b as e,i as $,D as N,c as J,g as R,d as l,y as re,u as D,F as V,x as T,v as ue,t as u,n as Q,E as me,e as X,G as _e,B as pe,C as ve,H as he,T as fe}from"./app-D1mwo86F.js";import{_ as ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ge="/build/assets/student-search-BiC_fK2p.gif",n=j=>(pe("data-v-5f74da8d"),j=j(),ve(),j),xe=n(()=>e("img",{src:ge,style:{margin:"auto",display:"block","margin-bottom":"20px"}},null,-1)),be=n(()=>e("p",{class:"mb-0"},"Search student by Name /Email ID /Roll No",-1)),we=n(()=>e("hr",null,null,-1)),ke=n(()=>e("p",{class:"custom-title"},"Select Students and Generate Documents",-1)),Se={class:"form-floating"},Ce=n(()=>e("option",{value:"documents"},"Final Documents",-1)),Ve=n(()=>e("option",{value:"semesters"}," Semester Marksheet ",-1)),De=[Ce,Ve],$e=n(()=>e("label",{for:"floatingSelect"},"Update Document Type",-1)),Ue=n(()=>e("p",{class:""},"Select Documents to be Generated",-1)),Pe=n(()=>e("div",{"data-v-22f91e27":"",class:"v-col-md-12 v-col-12"},[e("hr",{"data-v-22f91e27":""})],-1)),Ne=n(()=>e("p",{class:"custom-title"},"Selects Students and Update Exam Status",-1)),Te={class:"form-floating mb-3"},Fe=n(()=>e("option",{value:"passed"},"Passed",-1)),Ge=n(()=>e("option",{value:"failed"},"Failed",-1)),Ee=n(()=>e("option",{value:"pending"},"Pending",-1)),Be=[Fe,Ge,Ee],je=n(()=>e("label",{for:"floatingSelect"},"Update Exam Status",-1)),Le={class:"flex flex-col"},Me={class:""},ze={class:""},Ie={class:"",style:{"overflow-x":"auto"}},Ae={class:"min-w-full divide-y marksheet-table"},Re={class:"bg-gray-50"},qe=n(()=>e("th",{scope:"col",class:"py-3.5 pl-1 pr-1 text-left text-sm text-primary font-semibold text-gray-900 sm:pl-6"}," Select Student ",-1)),He=n(()=>e("th",{scope:"col",class:"py-3.5 pl-1 pr-1 text-left text-sm text-primary font-semibold text-gray-900 sm:pl-6"}," Roll No ",-1)),Ke=n(()=>e("th",{scope:"col",class:"py-3.5 pl-1 pr-1 text-left text-sm text-primary font-semibold text-gray-900 sm:pl-6"}," Name ",-1)),Oe=n(()=>e("th",{scope:"col",class:"py-3.5 pl-1 pr-1 text-left text-sm text-primary font-semibold text-gray-900 sm:pl-6"}," Email ",-1)),Ye={scope:"col",class:"py-3.5 pl-1 pr-1 text-left text-sm text-primary font-semibold text-gray-900 sm:pl-6"},Je={class:"flex items-center space-x-2"},Qe=n(()=>e("option",{value:""}," Pass Status ",-1)),We=n(()=>e("option",{value:"passed"}," Passed ",-1)),Xe=n(()=>e("option",{value:"failed"}," Failed ",-1)),Ze=n(()=>e("option",{value:"pending"}," Pending ",-1)),et=[Qe,We,Xe,Ze],tt={scope:"col",class:"py-3.5 pl-1 pr-1 text-left text-sm text-primary font-semibold text-gray-900 sm:pl-6"},st=n(()=>e("option",{value:""}," Generated Status ",-1)),ot=n(()=>e("option",{value:"generated"}," Generated ",-1)),at=n(()=>e("option",{value:"not_generated"}," Not Generated ",-1)),lt=[st,ot,at],nt=n(()=>e("th",{scope:"col",class:"py-3.5 pl-1 pr-1 text-left text-sm text-primary font-semibold text-gray-900 sm:pl-6"}," Shipment Tracking ",-1)),ct={class:"divide-y divide-gray-200 bg-white"},dt={class:"whitespace-nowrap py-4 pl-4 pr-3 sm:pl-6"},it=["value"],rt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 text-secondary sm:pl-6"},ut={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500 text-primary"},mt={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500 text-warning"},_t={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},pt=["onClick","disabled"],vt={key:0},ht={style:{"list-style-type":"none"}},ft={key:1},yt=n(()=>e("p",{class:"text-center"}," No documents generated yet. ",-1)),gt=[yt],xt={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},bt=["onClick"],wt={key:0,class:""},kt={class:"max-w-none mx-auto"},St={class:"bg-white overflow-hidden shadow sm:rounded-lg"},Ct={class:"bg-white px-4 py-3 flex items-center justify-between"},Vt=n(()=>e("div",{class:"flex-1 flex justify-between sm:hidden"},null,-1)),Dt={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},$t={class:"text-sm text-gray-700 text-primary"},Ut={class:"font-medium"},Pt={class:"font-medium"},Nt={class:"font-medium"},Tt=["onClick","disabled"],Ft=["innerHTML"],Gt=n(()=>e("strong",{style:{color:"brown"},class:"text-success"},"Generated Documents",-1)),Et={key:0,style:{"list-style-type":"none"}},Bt={__name:"DataTable",props:{students:{type:Object,required:!0}},setup(j){const b=f([]),S=f([]),U=f(null);let x=f("");const w=f(""),M=f([]),i=f([]),h=f([]),F=f(!1),G=f(1),L=f(""),m=f(""),d=W();let k=null;const q=j;E(()=>q.students,a=>{i.value=a},{immediate:!0}),E(U,a=>{console.log("Search query changed:",a),G.value=1,k&&clearTimeout(k),k=setTimeout(()=>{C()},500)}),E(L,a=>{console.log("Filter by pass status:",a),G.value=1,C()}),E(m,a=>{console.log("Filter by Generated Status:",a),G.value=1,C()});const H=a=>{G.value=a.url.split("=")[1],C()},C=()=>{B.get("/marksheet/search",{params:{query:U.value,page:G.value,pass_status:L.value,generated_status:m.value}}).then(a=>{console.log(a),i.value=a.data.students}).catch(a=>{d.error(a.response.data.error)})},z=a=>{_e.visit(`/shipment/student/${a}`)};E(b,a=>{console.log("Selected students:",a)}),E(S,a=>{console.log("Selected documents:",a)});const I=a=>{h.value=a,F.value=!0},K=()=>{console.log(w.value),B.get("/marksheet/documents",{params:{doc_type:w.value}}).then(a=>{console.log(a),M.value=a.data.map(p=>p.document_name)}).catch(a=>{d.error(a.response.data.error)})},_=()=>{if(confirm("Are you sure you want to update"))console.log("User confirmed the update");else{console.log("User canceled the update");return}console.log("Form has gone through the update: ",w.value),B.post("/marksheet/update-documents",{doc_type:w.value,docs:S.value,students:b.value}).then(a=>{console.log(a),d.success("Documents updated successfully!"),S.value=[],b.value=[],w.value="",C()}).catch(a=>{S.value=[],b.value=[],w.value="",d.error(a.response.data.error)})},Z=()=>{if(confirm("Are you sure you want to update?"))console.log("User confirmed the update.");else{console.log("User canceled the update.");return}B.post("/marksheet/update-pass-status",{students:b.value,pass_status:x.value}).then(a=>{console.log(a),d.success("Pass status updated successfully!"),b.value=[],x.value="",C()}).catch(a=>{b.value=[],x.value="",d.error(a.response.data.error)})};return(a,p)=>{const y=v("v-col"),ee=v("v-text-field"),te=v("v-combobox"),g=v("v-icon"),O=v("v-btn"),A=v("v-row"),se=v("v-tooltip"),oe=v("v-card-title"),ae=v("v-card-subtitle"),Y=v("v-divider"),le=v("v-card-text"),ne=v("v-card-actions"),ce=v("v-card"),de=v("v-dialog");return c(),r(V,null,[t(A,{class:"justify-content-center"},{default:o(()=>[t(y,{cols:"12",md:"12",class:"text-center"},{default:o(()=>[xe,be]),_:1}),t(y,{cols:"12",md:"6",class:"search-box"},{default:o(()=>[t(ee,{modelValue:U.value,"onUpdate:modelValue":p[0]||(p[0]=s=>U.value=s),label:"Search by Name, Roll number or Email ...","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":""},null,8,["modelValue"])]),_:1}),t(y,{cols:"12",md:"12",class:"px-5"},{default:o(()=>[we]),_:1}),t(y,{cols:"12",md:"3"},{default:o(()=>[t(A,{class:"justify-content-center align-items-center"},{default:o(()=>[t(y,{cols:"12",md:"12",class:"py-2"},{default:o(()=>[ke,e("div",Se,[$(e("select",{onChange:K,"onUpdate:modelValue":p[1]||(p[1]=s=>w.value=s),class:"select2 form-control"},De,544),[[N,w.value]]),$e])]),_:1}),w.value?(c(),J(y,{key:0,cols:"12",md:"12",class:"py-2"},{default:o(()=>[Ue,t(te,{modelValue:S.value,"onUpdate:modelValue":p[2]||(p[2]=s=>S.value=s),color:"primary",items:M.value,chips:"",variant:"outlined",multiple:""},null,8,["modelValue","items"])]),_:1})):R("",!0),S.value.length>0?(c(),J(y,{key:1,cols:"12",md:"12",class:"d-flex justify-content-center align-items-center py-2 px-2"},{default:o(()=>[t(O,{onClick:p[3]||(p[3]=s=>_()),class:"btn btn-primary text-subtitle-1 text-white"},{default:o(()=>[t(g,{icon:"mdi-check-circle"}),l(" Generate Document")]),_:1})]),_:1})):R("",!0),Pe,t(y,{cols:"12",md:"12"},{default:o(()=>[Ne,e("div",Te,[$(e("select",{onChange:Z,"onUpdate:modelValue":p[4]||(p[4]=s=>re(x)?x.value=s:x=s),class:"select2 form-control"},Be,544),[[N,D(x)]]),je])]),_:1})]),_:1})]),_:1}),t(y,{cols:"12",md:"9"},{default:o(()=>[e("div",Le,[e("div",Me,[e("div",ze,[e("div",Ie,[e("table",Ae,[e("thead",Re,[e("tr",null,[qe,He,Ke,Oe,e("th",Ye,[e("div",Je,[$(e("select",{"onUpdate:modelValue":p[5]||(p[5]=s=>L.value=s),class:"border border-white text-sm rounded focus:outline-none"},et,512),[[N,L.value]])])]),e("th",tt,[$(e("select",{"onUpdate:modelValue":p[6]||(p[6]=s=>m.value=s),class:"border border-white text-sm rounded"},lt,512),[[N,m.value]])]),nt])]),e("tbody",ct,[(c(!0),r(V,null,T(i.value.data,s=>(c(),r("tr",{key:s.id},[e("td",dt,[$(e("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":p[7]||(p[7]=P=>b.value=P),class:"custom-checkbox"},null,8,it),[[ue,b.value]])]),e("td",rt,u(s.student_roll_no),1),e("td",ut,[t(g,{icon:"mdi-account"}),l(" "+u(s.student_name),1)]),e("td",mt,[t(g,{icon:s.email?"mdi-email":""},null,8,["icon"]),l(" "+u(s.email),1)]),e("td",_t,[e("button",{class:Q({"bg-green-500 text-white px-4 py-2 rounded text-capitalize":s.student_exam_status==="passed","bg-red-500 text-white px-4 py-2 rounded text-capitalize":s.student_exam_status==="failed","bg-yellow-500 text-white px-4 py-2 rounded text-capitalize":s.student_exam_status==="pending"}),disabled:""},[t(g,{icon:s.student_exam_status==="passed"?"mdi-account-check-outline":"mdi-account-cancel-outline"},null,8,["icon"]),l(" "+u(s.student_exam_status),1)],2)]),e("td",null,[t(se,{"no-click-animation":"",variant:"outlined",prominent:""},{activator:o(({props:P})=>[e("button",me({ref_for:!0},P,{onClick:ie=>I(s),disabled:s.documents.length<1,class:{"bg-green-500 text-white px-4 py-2 rounded":s.documents.length&&s.documents[0].is_document_generated==="yes","bg-red-500 text-white px-4 py-2 rounded":s.documents.length<1}}),[t(g,{icon:s.documents.length&&s.documents[0].is_document_generated==="yes"?"mdi-note-check":"mdi-note-remove"},null,8,["icon"]),l(" "+u(s.documents.length&&s.documents[0].is_document_generated==="yes"?"Generated":"Not Generated"),1)],16,pt)]),default:o(()=>[e("div",null,[s.documents.length>0?(c(),r("div",vt,[(c(!0),r(V,null,T(s.documents,P=>(c(),r("div",null,[e("li",ht,u(P.document_name),1)]))),256))])):(c(),r("div",ft,gt))])]),_:2},1024)]),e("td",xt,[e("button",{class:"text-success",onClick:P=>z(s.id)}," Track Shipment ",8,bt),t(g,{icon:"mdi-truck",color:"primary",class:"mx-1"})])]))),128))])])])])])]),i.value.current_page?(c(),r("div",wt,[e("div",kt,[e("div",St,[e("div",Ct,[Vt,e("div",Dt,[e("div",null,[e("p",$t,[l(" Showing "),e("span",Ut,u(i.value.from),1),l(" to "),e("span",Pt,u(i.value.to),1),l(" of "),e("span",Nt,u(i.value.total),1),l(" results ")])]),e("div",null,[(c(!0),r(V,null,T(i.value.links,(s,P)=>(c(),r("button",{onClick:X(ie=>H(s),["prevent"]),key:P,disabled:s.active||!s.url,class:Q(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",{"z-10 bg-indigo-50 border-indigo-500 text-indigo-600":s.active,"bg-white border-gray-300 text-gray-500 hover:bg-gray-50":!s.active}])},[e("span",{innerHTML:s.label,class:"text-primary"},null,8,Ft)],10,Tt))),128))])])])])])])):R("",!0)]),_:1})]),_:1}),t(de,{modelValue:F.value,"onUpdate:modelValue":p[9]||(p[9]=s=>F.value=s),"max-width":"600px"},{default:o(()=>[t(ce,{class:"mx-auto my-24","max-width":"780",outlined:""},{default:o(()=>[t(oe,{class:"text-h6 text-center text-primary"},{default:o(()=>[t(g,{icon:"mdi-account"}),l(" "+u(h.value.student_name),1)]),_:1}),t(ae,{class:"text-center text-primary"},{default:o(()=>[t(g,{icon:"mdi-file-sign"}),l(" Roll No: "+u(h.value.student_roll_no),1)]),_:1}),t(Y),t(le,null,{default:o(()=>[t(A,null,{default:o(()=>[t(y,{cols:"6",class:"py-1 text-primary"},{default:o(()=>[e("strong",null,[t(g,{icon:"mdi-email"}),l(" Email:")]),l(" "+u(h.value.email),1)]),_:1}),t(y,{cols:"6",class:"py-1 text-primary"},{default:o(()=>[e("strong",null,[t(g,{icon:"mdi-city"}),l(" City:")]),l(" "+u(h.value.student_city),1)]),_:1}),t(y,{cols:"6",class:"py-1 text-primary"},{default:o(()=>[e("strong",null,[t(g,{icon:"mdi-map-marker"}),l(" Address:")]),l(" "+u(h.value.student_address),1)]),_:1}),t(y,{cols:"6",class:"py-1 text-primary"},{default:o(()=>[e("strong",null,[t(g,{icon:"mdi-pin"}),l(" Pincode:")]),l(" "+u(h.value.student_pincode),1)]),_:1}),t(y,{cols:"6",class:"py-1 text-primary"},{default:o(()=>[e("strong",null,[t(g,{icon:"mdi-restore"}),l(" Exam Cycle:")]),l(" "+u(h.value.exam_cycle),1)]),_:1}),t(y,{cols:"6",class:"py-1 text-primary"},{default:o(()=>[e("strong",null,[t(g,{icon:"mdi-clock-check"}),l(" Passing Year:")]),l(" "+u(h.value.student_passing_year),1)]),_:1}),t(y,{cols:"6",class:"py-1 text-primary"},{default:o(()=>[e("strong",null,[t(g,{icon:"mdi-creation"}),l(" Exam Status:")]),l(" "+u(h.value.student_exam_status),1)]),_:1}),t(y,{cols:"6",class:"py-1 text-primary"},{default:o(()=>[e("strong",null,[t(g,{icon:"mdi-auto-fix"}),l(" Created By:")]),l(" "+u(h.value.created_by),1)]),_:1})]),_:1}),t(Y),t(A,null,{default:o(()=>[t(y,{cols:"12",class:"py-1"},{default:o(()=>[Gt,(c(!0),r(V,null,T(h.value.documents,s=>(c(),r("span",null,[s.is_document_generated==="yes"?(c(),r("li",Et,[t(g,{icon:"mdi-check-circle",color:"success",size:"small"}),l(" "+u(s.document_name),1)])):R("",!0)]))),256))]),_:1})]),_:1})]),_:1}),t(ne,null,{default:o(()=>[t(O,{color:"primary",onClick:p[8]||(p[8]=s=>F.value=!1)},{default:o(()=>[l("Close")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},jt=ye(Bt,[["__scopeId","data-v-5f74da8d"]]),Lt={class:"form-floating mb-3"},Mt={key:0},zt=["value"],It=e("label",{for:"floatingSelect"},"Select Department",-1),At={class:"form-floating mb-3"},Rt={key:0},qt=["value"],Ht=e("label",{for:"floatingSelect"},"Select Programs",-1),Kt={class:"form-floating mb-3"},Ot={key:0},Yt=["value"],Jt=e("label",{for:"floatingSelect"},"Select Batch",-1),Qt={class:"form-floating mb-3"},Wt={key:0},Xt=["value"],Zt=e("label",{for:"floatingSelect"},"Select Exam Cycle",-1),es={href:"/sample_format.csv"},ts=e("button",{type:"submit",class:"btn btn-primary"},"Upload",-1),as={__name:"Filter",setup(j){const b=f([]),S=f([]),U=f([]),x=f(!0),w=W();he(()=>{B.get("/fetch/Apis").then(m=>{x.value=!1,S.value=m.data[0],b.value=m.data[1],U.value=m.data[2],console.log(b,S,U)}).catch(m=>{console.log(m)})});const M=f([]),i=fe({department_id:null,program_id:null,batch_id:null,examCycle:null}),h=f(null),F=f([]),G=()=>{if(!h.value){alert("Please select a CSV file.");return}if(!i.department_id){alert("Please select a department.");return}if(!i.program_id){alert("Please select a program.");return}if(!i.batch_id){alert("Please select a batch.");return}if(!i.examCycle){alert("Please select an exam cycle.");return}const m=new FormData;m.append("csv",h.value),m.append("department_id",i.department_id),m.append("program_id",i.program_id),m.append("batch_id",i.batch_id),m.append("examCycle",i.examCycle),console.log(m),B.post("/marksheet/upload",m,{headers:{"Content-Type":"multipart/form-data"}}).then(d=>{F.value=d.data.students,h.value=null,w.success("Student Data uploaded successfully")}).catch(d=>{console.log(d),h.value=null,w.error(d.message)})};E(()=>i.department_id,m=>{x.value=!0,L(m)});const L=m=>{B.get(`/marksheet/programs/${m}`).then(d=>{x.value=!1,M.value=d.data}).catch(d=>{console.log(d),w.error(d)})};return(m,d)=>{const k=v("v-col"),q=v("v-alert"),H=v("v-file-input"),C=v("v-row"),z=v("v-form"),I=v("v-sheet"),K=v("v-card");return c(),r(V,null,[t(I,{class:"v-card v-theme--light v-card--density-default v-card--variant-elevated mx-auto card-shadow mb-5 py-5"},{default:o(()=>[t(z,null,{default:o(()=>[t(C,{class:"pt-4"},{default:o(()=>[t(k,{cols:"12",md:"3"},{default:o(()=>[e("div",Lt,[$(e("select",{"onUpdate:modelValue":d[0]||(d[0]=_=>D(i).department_id=_),name:"department_id",id:"department",class:"select2 form-control"},[x.value?(c(),r("option",Mt,"Loading ...")):(c(!0),r(V,{key:1},T(b.value,_=>(c(),r("option",{value:_.department_id},u(_.department_name),9,zt))),256))],512),[[N,D(i).department_id]]),It])]),_:1}),t(k,{cols:"12",md:"3"},{default:o(()=>[e("div",At,[$(e("select",{"onUpdate:modelValue":d[1]||(d[1]=_=>D(i).program_id=_),name:"program_id",id:"programCreate",class:"select2 form-control"},[x.value?(c(),r("option",Rt,"Loading ...")):(c(!0),r(V,{key:1},T(M.value,_=>(c(),r("option",{value:_.program_id},u(_.program),9,qt))),256))],512),[[N,D(i).program_id]]),Ht])]),_:1}),t(k,{cols:"12",md:"3"},{default:o(()=>[e("div",Kt,[$(e("select",{"onUpdate:modelValue":d[2]||(d[2]=_=>D(i).batch_id=_),name:"batch_id",id:"batchCreate",class:"select2 form-control"},[x.value?(c(),r("option",Ot,"Loading ...")):(c(!0),r(V,{key:1},T(S.value,_=>(c(),r("option",{value:_.batch_id},u(_.batch),9,Yt))),256))],512),[[N,D(i).batch_id]]),Jt])]),_:1}),t(k,{cols:"12",md:"3"},{default:o(()=>[e("div",Qt,[$(e("select",{"onUpdate:modelValue":d[3]||(d[3]=_=>D(i).examCycle=_),name:"semester_id",id:"semesterCreate",class:"select2 form-control"},[x.value?(c(),r("option",Wt,"Loading ...")):(c(!0),r(V,{key:1},T(U.value,_=>(c(),r("option",{value:_.exam_cycle},u(_.exam_cycle),9,Xt))),256))],512),[[N,D(i).examCycle]]),Zt])]),_:1}),t(k,{cols:"12",md:"12"},{default:o(()=>[t(z,{onSubmit:X(G,["prevent"])},{default:o(()=>[t(C,{class:"d-flex justify-content-center align-items-center"},{default:o(()=>[t(k,{cols:"6",class:""},{default:o(()=>[e("a",es,[t(q,{class:"alert",text:"Please fill up the relevant details in the sample format provided in the link and then upload it.Click to download the sample file",title:"Note:",border:"start","border-color":"deep-purple accent-4",elevation:"2",type:""})])]),_:1}),t(k,{cols:"6"},{default:o(()=>[t(C,{class:"justify-content-center align-items-center"},{default:o(()=>[t(k,{cols:"8"},{default:o(()=>[t(H,{modelValue:h.value,"onUpdate:modelValue":d[4]||(d[4]=_=>h.value=_),clearable:"",label:"Upload CSV File ...",variant:"outlined",accept:".csv"},null,8,["modelValue"])]),_:1}),t(k,{cols:"4"},{default:o(()=>[ts]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(I,{class:"v-card v-theme--light v-card--density-default v-card--variant-elevated mx-auto card-shadow mb-5"},{default:o(()=>[t(K,{title:"Marksheet Data and Display",flat:""},{default:o(()=>[t(jt,{students:F.value},null,8,["students"])]),_:1})]),_:1})],64)}}};export{as as default};
